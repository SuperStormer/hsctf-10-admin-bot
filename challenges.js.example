const puppeteer = require('puppeteer')

module.exports = async () => {
  const sleep = time => new Promise(resolve => setTimeout(resolve, time))
  const browser = await puppeteer.launch({ env: {} })

  return new Map([
    ['one', {
      name: 'Challenge One',
      handler: async (url) => {
        const ctx = await browser.createIncognitoBrowserContext()
        const page = await ctx.newPage()
        await page.goto(url, { timeout: 5000, waitUntil: 'networkidle2' })
        await sleep(5000)
        await ctx.close()
      }
    }]
  ])
}
